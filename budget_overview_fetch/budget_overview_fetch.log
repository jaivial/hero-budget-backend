2025/06/06 12:44:16 Using database at: /Users/usuario/Documents/PROYECTOS/herobudgetflutter/hero_budget/backend/google_auth/users.db
2025/06/06 12:44:16 Database connection established successfully
2025/06/06 12:44:16 Budget Overview Fetch service starting on port 8098
2025/06/06 12:44:41 ğŸ“Š Balance data found: IncomeBank=200.00, IncomeCash=0.00, ExpenseBank=0.00, ExpenseCash=22.00, BillBank=244.00, BillCash=0.00, TotalBalance=-66.00
2025/06/06 12:44:41 ğŸ§® Budget calculation breakdown for period monthly, date 2025-06:
2025/06/06 12:44:41    ğŸ’° Total Income: 200.00 (Bank: 200.00 + Cash: 0.00)
2025/06/06 12:44:41    ğŸ’¸ Spent Amount (expenses only): 22.00 (Bank: 0.00 + Cash: 22.00)
2025/06/06 12:44:41    ğŸ·ï¸ Bills Amount: 244.00 (Bank: 244.00 + Cash: 0.00)
2025/06/06 12:44:41    ğŸ“Š Combined Expense (expenses + bills): 266.00
2025/06/06 12:44:41    ğŸ’µ Available Balance: -66.00 (Income: 200.00 - Combined Expenses: 266.00)
2025/06/06 12:44:41    ğŸ“‹ Upcoming Bills: 244.00
2025/06/06 12:44:41 ğŸ’³ Cash/Bank Distribution: Cash=-22.00 (0.0%), Bank=-44.00 (0.0%), Total=-66.00
2025/06/06 12:44:41 ğŸ“Š Balance data found: IncomeBank=200.00, IncomeCash=0.00, ExpenseBank=0.00, ExpenseCash=22.00, BillBank=244.00, BillCash=0.00, TotalBalance=-66.00
2025/06/06 12:44:41 ğŸ§® Budget calculation breakdown for period monthly, date 2025-06:
2025/06/06 12:44:41    ğŸ’° Total Income: 200.00 (Bank: 200.00 + Cash: 0.00)
2025/06/06 12:44:41    ğŸ’¸ Spent Amount (expenses only): 22.00 (Bank: 0.00 + Cash: 22.00)
2025/06/06 12:44:41    ğŸ·ï¸ Bills Amount: 244.00 (Bank: 244.00 + Cash: 0.00)
2025/06/06 12:44:41    ğŸ“Š Combined Expense (expenses + bills): 266.00
2025/06/06 12:44:41    ğŸ’µ Available Balance: -66.00 (Income: 200.00 - Combined Expenses: 266.00)
2025/06/06 12:44:41    ğŸ“‹ Upcoming Bills: 244.00
2025/06/06 12:44:41 ğŸ’³ Cash/Bank Distribution: Cash=-22.00 (0.0%), Bank=-44.00 (0.0%), Total=-66.00
2025/06/06 12:44:41 ğŸ” fetchUpcomingBills for month: 2025-06
2025/06/06 12:44:41 ğŸ” Query: 
			SELECT 
				b.id, b.name, b.amount, 
				CASE 
					WHEN b.recurring = 1 THEN 
						strftime('%Y-%m-%d', 
							date('2025-06-01', '+' || (b.payment_day - 1) || ' days'))
					ELSE b.due_date 
				END as calculated_due_date,
				COALESCE(bp.paid, 0) as month_paid, 
				b.overdue, b.overdue_days, b.recurring, b.category, b.icon,
				b.start_date, b.duration_months, b.payment_day
			FROM bills b 
			LEFT JOIN bill_payments bp ON b.id = bp.bill_id AND bp.year_month = '2025-06'
			WHERE b.user_id = ? AND (
			(b.recurring = 1 AND 
			 strftime('%Y-%m', b.start_date) <= ? AND 
			 strftime('%Y-%m', date(b.start_date, '+' || (b.duration_months - 1) || ' months')) >= ?) OR
			(b.recurring = 0 AND strftime('%Y-%m', b.due_date) = ?)
		) 
			ORDER BY COALESCE(bp.paid, 0) ASC, calculated_due_date ASC
2025/06/06 12:44:41 ğŸ” Args: [1 2025-06 2025-06 2025-06]
2025/06/06 12:44:41 ğŸ  Bill ID=8, Name=alquiler, Month=2025-06, Paid=false
2025/06/06 12:44:41 ğŸ“… Bill ID=8 is overdue by 5 days (due: 2025-06-01, now: 2025-06-06)
2025/06/06 12:44:41 ğŸ  Bill ID=4, Name=alquiler, Month=2025-06, Paid=false
2025/06/06 12:44:41 ğŸ“… Bill ID=4 is overdue by 1 days (due: 2025-06-05, now: 2025-06-06)
2025/06/06 12:44:41 ğŸ  Bill ID=5, Name=alquiler, Month=2025-06, Paid=false
2025/06/06 12:44:41 ğŸ“… Bill ID=5 is overdue by 1 days (due: 2025-06-05, now: 2025-06-06)
2025/06/06 12:44:41 ğŸ  Bill ID=2, Name=alquiler, Month=2025-06, Paid=false
2025/06/06 12:44:41 ğŸ  Bill ID=7, Name=alquiler, Month=2025-06, Paid=false
2025/06/06 12:44:41 ğŸ  Bill ID=1, Name=coche, Month=2025-06, Paid=true
2025/06/06 12:48:39 ğŸ“Š Balance data found: IncomeBank=200.00, IncomeCash=0.00, ExpenseBank=0.00, ExpenseCash=22.00, BillBank=244.00, BillCash=0.00, TotalBalance=-66.00
2025/06/06 12:48:39 ğŸ§® Budget calculation breakdown for period monthly, date 2025-06:
2025/06/06 12:48:39    ğŸ’° Total Income: 200.00 (Bank: 200.00 + Cash: 0.00)
2025/06/06 12:48:39    ğŸ’¸ Spent Amount (expenses only): 22.00 (Bank: 0.00 + Cash: 22.00)
2025/06/06 12:48:39    ğŸ·ï¸ Bills Amount: 244.00 (Bank: 244.00 + Cash: 0.00)
2025/06/06 12:48:39    ğŸ“Š Combined Expense (expenses + bills): 266.00
2025/06/06 12:48:39    ğŸ’µ Available Balance: -66.00 (Income: 200.00 - Combined Expenses: 266.00)
2025/06/06 12:48:39    ğŸ“‹ Upcoming Bills: 244.00
2025/06/06 12:48:39 ğŸ’³ Cash/Bank Distribution: Cash=-22.00 (0.0%), Bank=-44.00 (0.0%), Total=-66.00
2025/06/06 12:48:39 ğŸ” fetchUpcomingBills for month: 2025-06
2025/06/06 12:48:39 ğŸ” Query: 
			SELECT 
				b.id, b.name, b.amount, 
				CASE 
					WHEN b.recurring = 1 THEN 
						strftime('%Y-%m-%d', 
							date('2025-06-01', '+' || (b.payment_day - 1) || ' days'))
					ELSE b.due_date 
				END as calculated_due_date,
				COALESCE(bp.paid, 0) as month_paid, 
				b.overdue, b.overdue_days, b.recurring, b.category, b.icon,
				b.start_date, b.duration_months, b.payment_day
			FROM bills b 
			LEFT JOIN bill_payments bp ON b.id = bp.bill_id AND bp.year_month = '2025-06'
			WHERE b.user_id = ? AND (
			(b.recurring = 1 AND 
			 strftime('%Y-%m', b.start_date) <= ? AND 
			 strftime('%Y-%m', date(b.start_date, '+' || (b.duration_months - 1) || ' months')) >= ?) OR
			(b.recurring = 0 AND strftime('%Y-%m', b.due_date) = ?)
		) 
			ORDER BY COALESCE(bp.paid, 0) ASC, calculated_due_date ASC
2025/06/06 12:48:39 ğŸ” Args: [1 2025-06 2025-06 2025-06]
2025/06/06 12:48:39 ğŸ  Bill ID=8, Name=alquiler, Month=2025-06, Paid=false
2025/06/06 12:48:39 ğŸ“… Bill ID=8 is overdue by 5 days (due: 2025-06-01, now: 2025-06-06)
2025/06/06 12:48:39 ğŸ  Bill ID=4, Name=alquiler, Month=2025-06, Paid=false
2025/06/06 12:48:39 ğŸ“… Bill ID=4 is overdue by 1 days (due: 2025-06-05, now: 2025-06-06)
2025/06/06 12:48:39 ğŸ  Bill ID=5, Name=alquiler, Month=2025-06, Paid=false
2025/06/06 12:48:39 ğŸ“… Bill ID=5 is overdue by 1 days (due: 2025-06-05, now: 2025-06-06)
2025/06/06 12:48:39 ğŸ  Bill ID=2, Name=alquiler, Month=2025-06, Paid=false
2025/06/06 12:48:39 ğŸ  Bill ID=7, Name=alquiler, Month=2025-06, Paid=false
2025/06/06 12:48:39 ğŸ  Bill ID=1, Name=coche, Month=2025-06, Paid=true
2025/06/06 12:48:39 ğŸ“Š Balance data found: IncomeBank=200.00, IncomeCash=0.00, ExpenseBank=0.00, ExpenseCash=22.00, BillBank=244.00, BillCash=0.00, TotalBalance=-66.00
2025/06/06 12:48:39 ğŸ§® Budget calculation breakdown for period monthly, date 2025-06:
2025/06/06 12:48:39    ğŸ’° Total Income: 200.00 (Bank: 200.00 + Cash: 0.00)
2025/06/06 12:48:39    ğŸ’¸ Spent Amount (expenses only): 22.00 (Bank: 0.00 + Cash: 22.00)
2025/06/06 12:48:39    ğŸ·ï¸ Bills Amount: 244.00 (Bank: 244.00 + Cash: 0.00)
2025/06/06 12:48:39    ğŸ“Š Combined Expense (expenses + bills): 266.00
2025/06/06 12:48:39    ğŸ’µ Available Balance: -66.00 (Income: 200.00 - Combined Expenses: 266.00)
2025/06/06 12:48:39    ğŸ“‹ Upcoming Bills: 244.00
2025/06/06 12:48:39 ğŸ’³ Cash/Bank Distribution: Cash=-22.00 (0.0%), Bank=-44.00 (0.0%), Total=-66.00
